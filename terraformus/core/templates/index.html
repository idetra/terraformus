{% extends "base.html" %}
{% load static %}
{% block content %}

    <div class="row justify-content-center">
        <div class="col text-center">
            <p>{% if home_page.home_title %}{{ home_page.home_title }}{% endif %}
                {% if home_page.home_subtitle %} - {{ home_page.home_subtitle }}{% endif %}</p>
        </div>
    </div>
    
    <div class="row justify-content-around mb-3">
        <div class="col-lg-4 text-center">
            <button type="button" class="btn btn-outline-dark btn-xs" data-toggle="modal" data-target="#whatIsTerraFormus">
                What is Terra Formus
            </button>
        </div>
        <div class="col-lg-4 text-center">
            <button type="button" class="btn btn-outline-dark btn-xs" data-toggle="modal" data-target="#howToNavigate">
                How to navigate the platform
            </button>
        </div>
        <div class="col-lg-4 text-center">
            <button type="button" class="btn btn-outline-dark btn-xs" data-toggle="modal" data-target="#howToCreate">
                How to create solutions/strategies
            </button>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col text-center">
            <ul class="nav nav-justified nav-tabs" id="justifiedTab" role="tablist">
                <li class="nav-item justify-content-center" role="presentation">
                    <button aria-controls="solutions_control" aria-selected="true" class="nav-link active bg-light" data-toggle="tab" data-target="#solutions_control" id="solutions_control-tab" type="button" role="tab">Solutions</button>
                </li>
                <li class="nav-item justify-content-center" role="presentation">
                    <button aria-controls="strategies_control" aria-selected="false" class="nav-link bg-light" data-toggle="tab" data-target="#strategies_control" id="strategies_control-tab" type="button" role="tab">Strategies</button>
                </li>
            </ul>
            <div class="tab-content" id="justifiedTabContent">
                <div aria-labelledby="solutions_control-tab" class="tab-pane fade show active" id="solutions_control" role="tabpanel">
                    {% include 'solutions_table.html' %}
                </div>
                <div aria-labelledby="strategies_control-tab" class="tab-pane fade" id="strategies_control" role="tabpanel">
                    {% include 'strategies_table.html' %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal whatIsTerraFormus -->
    <div class="modal fade" id="whatIsTerraFormus" tabindex="-1"  aria-labelledby="whatIsTerraFormus" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
              <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="{{ home_page.what_is_the_platform_video }}" allowfullscreen></iframe>
              </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modal whatIsTerraFormus -->
    <div class="modal fade" id="howToNavigate" tabindex="-1"  aria-labelledby="howToNavigate" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
              <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="{{ home_page.how_to_use_video }}" allowfullscreen></iframe>
              </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modal whatIsTerraFormus -->
    <div class="modal fade" id="howToCreate" tabindex="-1"  aria-labelledby="howToCreate" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
              <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="{{ home_page.how_to_create_video }}" allowfullscreen></iframe>
              </div>
          </div>
        </div>
      </div>
    </div>
    
    

{% endblock content %}

{% block javascript %}
    
    <!-- Script stops video from playing when modal is closed -->
    <script>
        $("#whatIsTerraFormus").on('hidden.bs.modal', function (e) {
            $("#whatIsTerraFormus iframe").attr("src", $("#whatIsTerraFormus iframe").attr("src"));
        });
        
        $("#howToNavigate").on('hidden.bs.modal', function (e) {
            $("#howToNavigate iframe").attr("src", $("#howToNavigate iframe").attr("src"));
        });
        
        $("#howToCreate").on('hidden.bs.modal', function (e) {
            $("#howToCreate iframe").attr("src", $("#howToCreate iframe").attr("src"));
        });
    </script>
    
    <script>
        $(document).ready(function () {
            // When the tab is shown
            $('button[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                // Save the latest tab in local storage
                var id = $(e.target).attr('aria-controls');
                localStorage.setItem('activeTab', id);
            });
        });
    </script>
    
{% endblock javascript %}
